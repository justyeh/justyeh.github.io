(function(e){function t(t){for(var a,s,r=t[0],u=t[1],c=t[2],l=0,h=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],a=!0,r=1;r<o.length;r++){var u=o[r];0!==i[u]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=o[0]))}return e}var a={},i={app:0},n=[];function s(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=a,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(o,a,function(t){return e[t]}.bind(null,a));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/demo/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=u;n.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"player"},[o("div",{staticClass:"container",on:{touchstart:function(t){return t.stopPropagation(),e.handleTouchStart(t)},touchmove:function(t){return t.stopPropagation(),e.handleTouchMove(t)},touchend:function(t){return t.stopPropagation(),e.handleTouchEnd(t)}}},[o("div",{staticClass:"refresh",style:{top:e.refreshTop+"px"}},[e.refreshLoading?o("span",[e._v("加载中...")]):o("span",[e._v(e._s(e.refreshTop>e.refreshKeyPoint?"下拉":"松开")+"刷新")])]),o("div",{ref:"pageBox",style:{transform:"translateY("+e.translateY+"px)"}},e._l(e.playList,(function(t,a){return o("douyin-page",{key:t.id,attrs:{data:t,"show-video":a===e.activeIndex}})})),1)])])])},n=[],s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"douyin-page",on:{click:function(t){return t.stopPropagation(),e.toggleVideoPlay(t)}}},[o("div",{staticClass:"title"},[e._v(e._s(e.data.resourceName||"无标题视频"))]),e.showVideo?[o("video",{ref:"videoRef",attrs:{src:e.data.sourceUrl,poster:e.data.resourceImage,muted:"",preload:"auto",loop:""},domProps:{muted:!0},on:{play:e.onVideoPlay,pause:e.onVideoPause,timeupdate:e.onVideoTimeupdate}})]:o("img",{staticClass:"poster",attrs:{src:e.data.resourceImage,alt:""}}),e.controlVisible?o("transition",{attrs:{name:"fade"}},[o("div",{staticClass:"control",on:{click:e.toggleVideoPlay}})]):e._e(),e.process>0?o("div",{staticClass:"process"},[o("span",{style:{left:e.process+"%"}})]):e._e(),o("div",{staticClass:"info"},[o("img",{attrs:{src:e.data.authorImage,alt:""}}),o("div",[o("div",{staticClass:"author"},[e._v(e._s(e.data.author||"无作者"))]),o("div",{staticClass:"desc"},[o("span",[e._v(e._s(e.data.authorHospitalName))]),e.data.authorDepartment?o("span",[e._v(" | "+e._s(e.data.authorDepartment))]):e._e(),e.data.authorJobTitle?o("span",[e._v(" | "+e._s(e.data.authorJobTitle))]):e._e()])])])],2)},r=[],u=(o("b680"),{name:"HelloWorld",props:{data:Object,showVideo:Boolean},data:function(){return{controlVisible:!1,process:-1}},mounted:function(){var e=this;this.showVideo&&this.$nextTick((function(){e.$refs.videoRef.play()}))},methods:{onVideoPlay:function(){this.controlVisible=!1},onVideoPause:function(){this.controlVisible=!0},onVideoTimeupdate:function(){var e=this.$refs.videoRef,t=e.currentTime,o=e.duration;t&&o&&(this.process=(t/o).toFixed(2))},toggleVideoPlay:function(){console.log("toggleVideoPlay");var e=this.$refs.videoRef;e.paused?(e.play(),this.controlVisible=!1):(e.pause(),this.controlVisible=!0)}}}),c=u,d=(o("61ce"),o("2877")),l=Object(d["a"])(c,s,r,!1,null,"43f55872",null),h=l.exports,p=[{resourceId:295,resourceName:"33",resourceImage:"https://aikangcloudtest-new.oss-cn-qingdao.aliyuncs.com/oss/imag/2021/3/532802571400933376.jpg",resourceDesc:"22",state:1,resourceType:"VIDEO",sourceUrl:"https://aikangcloudtest-new.oss-cn-qingdao.aliyuncs.com/oss/video/2021/3/532802610202439680.mp4",viewCount:374,author:"呵呵微医院",authorId:10012317,authorImage:"https://aikangcloudtest-new.oss-cn-qingdao.aliyuncs.com/oss/imag/2020/10/475444566456299520.jpeg",authorJobTitle:"医师",authorHospitalName:"黄石爱康医院",authorDepartment:"黄石爱康医院",publishState:1,createTime:"2021-03-19 16:15:14",eduType:4,uploadId:"7CC9CCA37733498ABE03D779E5CDF21F",fileSize:361299,diseaseGroup:"小儿癫痫",tenant:"9",likedCount:1,uploadState:1,tagNum:2,resourceViewCount:374,isSeeDoctor:0,isLiked:0,authId:10012317},{resourceId:321,resourceName:"测试",resourceImage:"https://aikangcloudtest-new.oss-cn-qingdao.aliyuncs.com/oss/imag/2021/5/550954588166189056.jpg",state:1,resourceType:"VIDEO",sourceUrl:"https://aikangcloudtest-new.oss-cn-qingdao.aliyuncs.com/oss/video/2021/5/550955171426103298.mp4",viewCount:31,author:"阿里里",authorId:10012883,authorImage:"https://aikangcloudtest-new.oss-cn-qingdao.aliyuncs.com/oss/imag/2021/5/550955108700286976.jpg",authorJobTitle:"医师",authorHospitalName:"黄石爱康医院",authorDepartment:"中医内科",publishState:1,createTime:"2021-05-08 18:26:24",eduType:4,uploadId:"3DEC71FDB764422C92EA170F77586FBA",fileSize:45121531,diseaseGroup:"未分组",tenant:"9",likedCount:1,uploadState:1,tagNum:2,resourceViewCount:31,isSeeDoctor:0,isLiked:0,authId:10012883},{resourceId:312,resourceName:"发布测试",resourceImage:"https://aikangcloudtest-new.oss-cn-qingdao.aliyuncs.com/oss/imag/2021/5/550188454617837568.jpg",resourceDesc:"无",state:1,resourceType:"VIDEO",sourceUrl:"https://aikangcloudtest-new.oss-cn-qingdao.aliyuncs.com/oss/video/2021/5/550188565276160002.mp4",viewCount:6,author:"法克",authorId:10012731,authorImage:"https://aikangcloudtest-new.oss-cn-qingdao.aliyuncs.com/oss/imag/2021/1/515015810339860482.jpg",authorJobTitle:"医师",authorHospitalName:"黄石爱康医院",authorDepartment:"产科",publishState:1,createTime:"2021-05-06 15:39:59",eduType:4,uploadId:"78B20CB54A254EFB9C02A12AB7D5483C",fileSize:45121531,diseaseGroup:"未分组",tenant:"9",likedCount:0,uploadState:1,tagNum:2,resourceViewCount:6,isSeeDoctor:0,isLiked:0,authId:10012731}],f={name:"App",components:{DouyinPage:h},data:function(){return{playList:p,activeIndex:0,prevVideo:null,activeVideo:null,nextVideo:null,translateY:0,refreshKeyPoint:70,refreshTop:0,refreshLoading:!1}},created:function(){this.initVideoIns()},mounted:function(){this.$pageBox=this.$refs.pageBox},methods:{initVideoIns:function(){this.activeIndex-1>=0?this.prevVideo=this.playList[this.activeIndex-1]:this.prevVideo=null,this.activeVideo=this.playList[this.activeIndex],this.activeIndex+1<=this.playList.length-1?this.nextVideo=this.playList[this.activeIndex+1]:this.nextVideo=null},handleTouchStart:function(e){this.touchStratTime=Date.now(),this.touchStartY=e.changedTouches[0].clientY},handleTouchMove:function(e){var t=e.touches[0].clientY-this.touchStartY;this.translateY=-this.activeIndex*window.innerHeight+t,0===this.activeIndex&&(this.refreshTop=t>=this.refreshKeyPoint?this.refreshKeyPoint:t)},handleTouchEnd:function(e){var t=Date.now()-this.touchStratTime,o=e.changedTouches[0].clientY-this.touchStartY,a=Math.abs(o/t);a>1||Math.abs(o)>window.innerHeight/4?o>0?this.moveToIndex(this.activeIndex-1):this.moveToIndex(this.activeIndex+1):this.moveToIndex(this.activeIndex),o>=this.refreshKeyPoint&&0===this.activeIndex&&this.doRefresh()},moveToIndex:function(e){var t=this,o=e;e<0&&(o=0),e>this.playList.length-1&&(o=this.playList.length-1,this.toast("没有了"));var a=-o*window.innerHeight;this.$pageBox.style.transitionDuration=".3s",this.$pageBox.style.transitionProperty="transform",this.$pageBox.style.transitionTimingFunction="easy",this.translateY=a,this.$pageBox.addEventListener("transitionend",(function(){t.$pageBox.style.transitionDuration="0s",t.activeIndex=o}))},doRefresh:function(){var e=this;this.refreshLoading=!0;var t=setTimeout((function(){e.refreshLoading=!1,e.refreshTop=0,clearTimeout(t)}),1e3)},toast:function(e){var t=document.createElement("div");t.classList.add("toast"),t.innerText=e,document.body.appendChild(t);var o=setTimeout((function(){t.remove(),clearTimeout(o)}),1e3)}}},g=f,m=Object(d["a"])(g,i,n,!1,null,null,null),v=m.exports;o("90e1");a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(v)}}).$mount("#app")},"61ce":function(e,t,o){"use strict";o("7089")},7089:function(e,t,o){},"90e1":function(e,t,o){}});
//# sourceMappingURL=app.0c29dc35.js.map